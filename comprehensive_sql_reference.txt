Comprehensive SQL Operations Reference

1. Database Hierarchy (Parent/Child Concepts)

-   Server
    -   Databases (Parent)
        -   Schemas
            -   Tables (Parent)
                -   Columns
                -   Constraints
                -   Indexes
                -   Triggers
            -   Views
            -   Materialized Views
        -   Users & Roles
        -   Functions & Procedures
-   Relationships
    -   Parent Table → Child Table (via FOREIGN KEY)
    -   One-to-One
    -   One-to-Many
    -   Many-to-Many (junction table)

Parent/Child Examples:

CREATE TABLE parents ( parent_id INT PRIMARY KEY, parent_name
VARCHAR(100) );

CREATE TABLE children ( child_id INT PRIMARY KEY, parent_id INT, FOREIGN
KEY (parent_id) REFERENCES parents(parent_id) );

2. Table Operations

Create Table Variants

CREATE TABLE IF NOT EXISTS table_name (…); CREATE TEMP TABLE tmp AS
SELECT …;

Modify Table

ALTER TABLE table ADD COLUMN new_col TEXT; ALTER TABLE table DROP COLUMN
old_col; ALTER TABLE table RENAME TO new_name;

Table Constraints

PRIMARY KEY (col) FOREIGN KEY (col) REFERENCES parent(col) UNIQUE (col)
CHECK (col > 0) DEFAULT value

Table Metadata Queries

PRAGMA table_info(table_name); – SQLite SHOW COLUMNS FROM table_name; –
MySQL SELECT column_name, data_type FROM information_schema.columns
WHERE table_name=‘t’; – Postgres

3. Insert Operations

Basic Inserts

INSERT INTO table(col1, col2) VALUES (v1, v2);

Multi-row Insert

INSERT INTO table VALUES (1,2),(3,4),(5,6);

Insert from Select

INSERT INTO backup_table SELECT * FROM source_table;

4. Update Operations

UPDATE table SET col = value WHERE id = 1;

Conditional Update

UPDATE table SET status = CASE WHEN col > 0 THEN ‘positive’ ELSE ‘zero’
END;

5. Delete Operations

DELETE FROM table WHERE id = 10; TRUNCATE TABLE table; DELETE FROM
table; – full delete

6. Select (Query) Operations

Basic Select

SELECT * FROM table; SELECT col1, col2 FROM table;

Filtering

SELECT * FROM table WHERE col BETWEEN 10 AND 50; SELECT * FROM table
WHERE col LIKE ‘%abc%’;

Sorting

SELECT * FROM table ORDER BY col ASC;

Pagination

SELECT * FROM table LIMIT 10 OFFSET 20;

7. Join Operations

1. Inner Join

SELECT a., b. FROM a INNER JOIN b ON a.id = b.id;

2. Left Join

SELECT * FROM a LEFT JOIN b ON a.id = b.id;

3. Right Join

SELECT * FROM a RIGHT JOIN b ON a.id = b.id;

4. Full Outer Join

SELECT * FROM a FULL OUTER JOIN b ON a.id = b.id;

5. Cross Join

SELECT * FROM a CROSS JOIN b;

6. Self Join

SELECT e1.name, e2.name AS manager FROM employees e1 JOIN employees e2
ON e1.manager_id = e2.id;

8. Aggregations & Grouping

SELECT dept, COUNT(*), AVG(salary), SUM(bonus) FROM employees GROUP BY
dept HAVING AVG(salary) > 50000;

9. Subqueries

Scalar Subquery

SELECT name FROM employees WHERE salary = (SELECT MAX(salary) FROM
employees);

IN Subquery

SELECT * FROM orders WHERE user_id IN (SELECT id FROM users WHERE
country=‘US’);

EXISTS Subquery

SELECT * FROM users u WHERE EXISTS (SELECT 1 FROM orders o WHERE
o.user_id = u.id);

10. Window Functions

SELECT id, salary, RANK() OVER (ORDER BY salary DESC) AS rank,
SUM(salary) OVER () AS total FROM employees;

11. Views

CREATE VIEW active_users AS SELECT * FROM users WHERE status=‘active’;
DROP VIEW active_users;

12. Materialized Views

CREATE MATERIALIZED VIEW mv_sales AS SELECT * FROM sales; REFRESH
MATERIALIZED VIEW mv_sales;

13. Stored Procedures

SQL Server

CREATE PROCEDURE getUsers AS BEGIN SELECT * FROM users; END;

PostgreSQL

CREATE PROCEDURE testproc() LANGUAGE plpgsql AS
BEGINRAISENOTICE′Procedureexecuted′; END;
;

CALL testproc();

14. Functions

CREATE FUNCTION add(a INT, b INT) RETURNS INT AS
BEGINRETURNa + b; END;
LANGUAGE plpgsql;

15. Triggers

CREATE TRIGGER user_audit AFTER INSERT ON users FOR EACH ROW EXECUTE
FUNCTION log_user_insert();

16. Indexes

CREATE INDEX idx_user_email ON users(email); CREATE UNIQUE INDEX
idx_username ON users(username); CREATE INDEX idx_gin ON docs USING
gin(jsonb_column);

17. Transactions

BEGIN; UPDATE table SET col=1; COMMIT;

ROLLBACK;

SAVEPOINT sp1; ROLLBACK TO sp1;

18. Permissions

GRANT SELECT ON table TO user; GRANT ALL PRIVILEGES ON DATABASE db TO
admin; REVOKE UPDATE ON table FROM user;

CREATE USER john WITH PASSWORD ‘123’; DROP USER john;

19. Advanced SQL Patterns

UPSERT (Insert + Update)

PostgreSQL

INSERT INTO t(id, val) VALUES(1,‘x’) ON CONFLICT(id) DO UPDATE SET val =
EXCLUDED.val;

MySQL

INSERT INTO t(id,val) VALUES(1,‘x’) ON DUPLICATE KEY UPDATE val=‘x’;

CTE (Common Table Expression)

WITH recent AS ( SELECT * FROM sales WHERE sale_date > NOW() - INTERVAL
‘7 days’ ) SELECT * FROM recent;

Recursive CTE

WITH RECURSIVE nums(n) AS ( SELECT 1 UNION ALL SELECT n+1 FROM nums
WHERE n < 10 ) SELECT * FROM nums;

20. Many-to-Many Relationship Example

CREATE TABLE students( student_id INT PRIMARY KEY, name TEXT );

CREATE TABLE subjects( subject_id INT PRIMARY KEY, subject_name TEXT );

CREATE TABLE student_subjects( student_id INT, subject_id INT, PRIMARY
KEY(student_id, subject_id), FOREIGN KEY(student_id) REFERENCES
students(student_id), FOREIGN KEY(subject_id) REFERENCES
subjects(subject_id) );
